sudo: required
language: node_js
node_js:
- stable
services:
- docker
cache:
  directories:
  - node_modules
script:
- docker build -t kvoli/fun-with-friends .
- docker run -p 80:8080 kvoli/fun-with-friends
notifications:
  slack: fwf30022:vAysC0wefIZnRdZ3N3jGoDNN
cache:
  directories:
  - node_modules
branches:
  only:
  - staging
  - production
after_success:
- docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
- docker build -t kvoli/fun-with-friends .
- docker push kvoli/fun-with-friends
env:
  secure: rQbB3jASwPR8CaPmyx1dXchT0kn2N+RC4tkwiCVkGliquq1kvODN4kspeXfP6k5zbjPyRkQqXSGIrdx20TEtqybe+jvqUmi2bpbIdtTv/PblE49zRgusv6/lGUlFcG4tSYCjDBotPAnvYGACxAuGMb/AkL6qedMue1iQuMKMzKIoz+Fb7IVr3r+5tdN4XYDifV84EeIQd0fMiHkM2VyKlc5QySXksE5lTarhRDsrM6HDjtsb8MrFOpctGJMhGpCkBq2Ods44kRMG8+jokayRWHyORm06kzyVNuGE64/RfkG8J5QYBhvjyDskXC/bNOw7yqDSASrQK7m8hZI8pvATmtAEDOoHxZz4yXdoMS7VZ3M63l1/DNuTWkJXg1yLAelc40ytc2yUn0YTFD1Q3X8R0VRknaVwgIw16uE9q3P8MUG9MdDvyKWAXZKGkgA0sucJ9648u6QiKru7XUYtVhUzv6Hhzv8jaAWCk0PcJHUSoYOs2OaHem6U5aO2bIPJGpsUc0FDMkBGKuD/h6w/f8baVEE36vn7Gck/KKugU+s40by8QQXm6/JsY9MplcouavRmR1cGpErGTcZDsHV0Knvq3h4OkmzszZU5hiGaTtjAbdyJmB+POewCj6ZdL0LTtYR1iD1/IHhhSwnMSa5FH7chSsnFyn23nU/hi4p6GntvYlU=