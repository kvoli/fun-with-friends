sudo: required
language: node_js
node_js:
- stable
services:
- docker
cache:
  directories:
  - node_modules
script:
- cd server && npm install
- cd ../client && npm install
- npm test
- npm run build
- cd ..
- docker build -t kvoli/fun-with-friends .
notifications:
  slack: fwf30022:vAysC0wefIZnRdZ3N3jGoDNN
branches:
  only:
  - staging
  - production
after_success:
- docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
- docker build -t kvoli/fun-with-friends .
- docker push kvoli/fun-with-friends
env:
  secure:
    - "RInP8UvMnZ+4uM7qWtTclYam6q24ohzcO4uTw5mh7wrEykeOGujKsfuvgMorlxhPAKHTlH7zpKlS+8LL5kX2Ny245F/C0bZxYReJ90ssFWbyNmY+wRNNyi7Hzq1IBHu5688L/rzP1+MgcXS2K93ysKgfMBv3LLf9tHuu+voeDCxOfAkBA/ymcftseykN4y4bQrKLrjEn+MlMIKcBpsWKTwX3DiM8DZYOE3X4jYoy4pmYcD3DKRrGODVvMQhrWkHq04G6n+Xzn/1wlJGiirUYK5gCXX0EeXBT/JHq7txYpste2iP3aPNIczSJF6NcxWaKzxMC1irv4/f4i9lyQY8+oPuAGtleQ8PsYqIQ4uXloakAGumXVovnn/BQwz/5bOVZ8lU/JwA6wZfTPi/Dg3MhCXDZrbylgNaQxUSyG/WU3S+z0RkZRBKS4/hQLu6vUUn9VLZPxAxRUoIUkHKlHlceRbSvIrXJGfTVNDShdm0OXIFO5Jvd/AD1G1d1hpkjOpRvQXPLq//A7rvbjomx8Y4LgHCRBJ9u/V5Vlr5hInLqPxExq+PRupMA81KDwyN7PiQsgWd55l1EDcos8GZCRdczZZVk15NVKhX7YCpWgLqX61wYjWf0R3kwU/3h9onZEZ2/g0PZE1iCVK09uvWW0JDyPeBxj0jJyYweSYxW0Zz2vac="
    - "mVYu0vr2mTsNnVmtkfj+062eSaXDPT0dvzxugT8skoyvF91YznRzBqL6z8SQM0MDUc/Q/nlKI6DYh3SNJkTBWpD9fdtz7UkM5UDOukYV37+WM7iiWzr+w8JOPh4Ky/uMV735EBt29LTjgjGpo0/L4FncJjNno1XVGeammXNrnktltm5E9oXj//7e7AfiTo+hI4frzZJAk+GvcHIH6dW3vGiGZcwnkSdtpq/65Z67+FcrEqLHgohUgLr8Fl5/ujWZkaxEn5WqH7KybfIIdh/lVl7CK8lJunJICjdhgM30TQhecSSj5NM6TlKiHTzgaNhCF1MevAYXtvdpl3i9IBfKHc+zaGdyLxhqWkV917hmQ+AlYM33Lip3r6XUERjkTX43Ro/o3pWyyP54C9XDl5YG8Rj0m+L4VbWdWMewCruaLooxVdYoHf40iAhEeewFI2cEgsWqe5xCGNoPxpSotkI7YPHaTdk9hYAxOK3xv9Y91dEKkWdMxX3FJiJOHsnSE0mOySjjuCEwBP+SseBrrXR5YJJRmLtVj5z4guFax1H9xj5aQ1dQznvjkDf7et7Vioij0Ct+Y+ciYlgtdfyfDS/cPx3vkS1fhLV0ILUxpbr0/T3+mvfXrtcxOYeCQ8cfqflVhjmHVfqD2wZfOpbtKBJdAKBaDXbZR8Tju6PQSWj6oaM="

